{"title":"如何本地服务化部署PaddleOCR","slug":"2025-8-20","date":"2025-08-19T16:00:00.000Z","updated":"2025-08-20T05:34:37.842Z","comments":true,"path":"api/articles/2025-8-20.json","excerpt":null,"covers":null,"content":"<p>耗时一礼拜阅读完文档摸索出一条PaddleOCR最简单快速部署，并能通过api调用的方法。总结如下：</p>\n<h2 id=\"1-环境准备\"><a href=\"#1-环境准备\" class=\"headerlink\" title=\"1 环境准备\"></a>1 环境准备</h2><ul>\n<li>Lunix系统</li>\n<li>有显卡（我的是RTX4080），并且安装对应驱动</li>\n<li>提前安装了Docker</li>\n</ul>\n<h2 id=\"2-通过镜像拉取环境\"><a href=\"#2-通过镜像拉取环境\" class=\"headerlink\" title=\"2 通过镜像拉取环境\"></a>2 通过镜像拉取环境</h2><ol>\n<li>安装含有<strong>高性能推理</strong>依赖的 PaddleX <a href=\"http://www.paddleocr.ai/main/version3.x/deployment/high_performance_inference.html#11\">官方 Docker 镜像</a></li>\n</ol>\n<p>这里推荐CUDA11.8的版本，全部依赖都是齐全的，而且不会有冲突。安装方法如下：<a href=\"https://www.paddlepaddle.org.cn/install/quick?docurl=/documentation/docs/zh/install/docker/linux-docker.html\">命令参考网站</a></p>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 1.拉取官方GPU镜像(以网站最新版本为准)</span><br><span class=\"line\">docker pull ccr-2vdh3abv-pub.cnc.bj.baidubce.com/paddlex/paddlex:paddlex3.0.1-paddlepaddle3.0.0-gpu-cuda11.8-cudnn8.9-trt8.6</span><br><span class=\"line\"></span><br><span class=\"line\"># 2.创建容器运行目录</span><br><span class=\"line\">mkdir puddlex</span><br><span class=\"line\">cd puddlex</span><br><span class=\"line\"></span><br><span class=\"line\"># 3.运行容器</span><br><span class=\"line\">docker run --gpus all --name paddle-hpi -v $PWD:/paddle --shm-size=16G --network=host -it ccr-2vdh3abv-pub.cnc.bj.baidubce.com/paddlex/paddlex:paddlex3.0.1-paddlepaddle3.0.0-gpu-cuda11.8-cudnn8.9-trt8.6 /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\"># 默认直接进入容器内部了，后续退出想再次进入使用</span><br><span class=\"line\">docker attach paddle-hpi</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>进入容器内部安装 <a href=\"http://www.paddleocr.ai/main/quick_start.html\">PaddleOCR</a></li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 1.安装PaddlePaddle</span><br><span class=\"line\">python -m pip install paddlepaddle-gpu==3.0.0 -i https://www.paddlepaddle.org.cn/packages/stable/cu118/</span><br><span class=\"line\"></span><br><span class=\"line\"># 2.安装paddleocr</span><br><span class=\"line\">pip install paddleocr</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>验证安装</li>\n</ol>\n<p>采用<a href=\"https://github.com/PaddlePaddle/PaddleOCR/blob/main/readme/README_cn.md\">github</a>上的命令，简单直接：</p>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 运行 PP-OCRv5 推理</span><br><span class=\"line\">paddleocr ocr -i https://paddle-model-ecology.bj.bcebos.com/paddlex/imgs/demo_image/general_ocr_002.png --use_doc_orientation_classify False --use_doc_unwarping False --use_textline_orientation False </span><br><span class=\"line\"></span><br><span class=\"line\"># 运行 PP-StructureV3 推理</span><br><span class=\"line\">paddleocr pp_structurev3 -i https://paddle-model-ecology.bj.bcebos.com/paddlex/imgs/demo_image/pp_structure_v3_demo.png --use_doc_orientation_classify False --use_doc_unwarping False</span><br><span class=\"line\"></span><br><span class=\"line\"># 运行 PP-ChatOCRv4 推理前，需要先获得千帆API Key</span><br><span class=\"line\">paddleocr pp_chatocrv4_doc -i https://paddle-model-ecology.bj.bcebos.com/paddlex/imgs/demo_image/vehicle_certificate-1.png -k 驾驶室准乘人数 --qianfan_api_key your_api_key --use_doc_orientation_classify False --use_doc_unwarping False </span><br><span class=\"line\"></span><br><span class=\"line\"># 查看 &quot;paddleocr ocr&quot; 详细参数</span><br><span class=\"line\">paddleocr ocr --help</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-开启服务\"><a href=\"#3-开启服务\" class=\"headerlink\" title=\"3 开启服务\"></a>3 开启服务</h2><h3 id=\"3-1-简单服务化部署\"><a href=\"#3-1-简单服务化部署\" class=\"headerlink\" title=\"3.1 简单服务化部署\"></a>3.1 简单服务化部署</h3><ol>\n<li>安装<a href=\"http://www.paddleocr.ai/main/version3.x/deployment/serving.html\">服务化部署插件</a></li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">paddlex --install serving</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>运行服务器</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># OCR产线</span><br><span class=\"line\">paddlex --serve --pipeline OCR --port 8080</span><br><span class=\"line\"></span><br><span class=\"line\"># PP-StructureV3</span><br><span class=\"line\">paddlex --serve --pipeline PP-StructureV3 --port 8080</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-启用高性能推理\"><a href=\"#3-2-启用高性能推理\" class=\"headerlink\" title=\"3.2 启用高性能推理\"></a>3.2 启用高性能推理</h3><ol>\n<li>安装<a href=\"https://paddlepaddle.github.io/PaddleX/latest/pipeline_deploy/high_performance_inference.html#11\">高性能推理插件</a></li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">paddlex --install hpi-gpu</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>运行服务器</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># OCR产线</span><br><span class=\"line\">paddlex --serve --pipeline OCR --port 8080 --hpi_config</span><br><span class=\"line\"></span><br><span class=\"line\"># PP-StructureV3</span><br><span class=\"line\">paddlex --serve --pipeline PP-StructureV3 --port 8080 --hpi_config</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-同时启动多个服务\"><a href=\"#3-3-同时启动多个服务\" class=\"headerlink\" title=\"3.3 同时启动多个服务\"></a>3.3 同时启动多个服务</h3><ol>\n<li>安装screen</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get install -y screen</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>通过screen会话运行服务器</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># OCR产线</span><br><span class=\"line\">screen -S ocr -d paddlex --serve --pipeline OCR --port 8080 --hpi_config</span><br><span class=\"line\"></span><br><span class=\"line\"># PP-StructureV3</span><br><span class=\"line\">screen -S structure -d paddlex --serve --pipeline PP-StructureV3 --port 8080 --hpi_config</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>管理screen会话</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查看正在运行的会话</span><br><span class=\"line\">screen -ls</span><br><span class=\"line\"></span><br><span class=\"line\"># 进入某个容器(使用Ctrl+D，然后按A退出)</span><br><span class=\"line\">screen -r ocr/structure</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-API文档\"><a href=\"#4-API文档\" class=\"headerlink\" title=\"4 API文档\"></a>4 API文档</h2><p>详见对应文档 -&gt; 开发集成&#x2F;部署 -&gt; API参考</p>\n<ul>\n<li><a href=\"http://www.paddleocr.ai/main/version3.x/pipeline_usage/OCR.html#3\">ocr对应api</a> POST &#x2F;ocr</li>\n<li><a href=\"http://www.paddleocr.ai/main/version3.x/pipeline_usage/PP-StructureV3.html#3\">structure对应api</a> POST &#x2F;layout-parsing</li>\n</ul>\n<span class='p center h1 black'>欢迎评论！</span>","more":"<p>耗时一礼拜阅读完文档摸索出一条PaddleOCR最简单快速部署，并能通过api调用的方法。总结如下：</p>\n<h2 id=\"1-环境准备\"><a href=\"#1-环境准备\" class=\"headerlink\" title=\"1 环境准备\"></a>1 环境准备</h2><ul>\n<li>Lunix系统</li>\n<li>有显卡（我的是RTX4080），并且安装对应驱动</li>\n<li>提前安装了Docker</li>\n</ul>\n<h2 id=\"2-通过镜像拉取环境\"><a href=\"#2-通过镜像拉取环境\" class=\"headerlink\" title=\"2 通过镜像拉取环境\"></a>2 通过镜像拉取环境</h2><ol>\n<li>安装含有<strong>高性能推理</strong>依赖的 PaddleX <a href=\"http://www.paddleocr.ai/main/version3.x/deployment/high_performance_inference.html#11\">官方 Docker 镜像</a></li>\n</ol>\n<p>这里推荐CUDA11.8的版本，全部依赖都是齐全的，而且不会有冲突。安装方法如下：<a href=\"https://www.paddlepaddle.org.cn/install/quick?docurl=/documentation/docs/zh/install/docker/linux-docker.html\">命令参考网站</a></p>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 1.拉取官方GPU镜像(以网站最新版本为准)</span><br><span class=\"line\">docker pull ccr-2vdh3abv-pub.cnc.bj.baidubce.com/paddlex/paddlex:paddlex3.0.1-paddlepaddle3.0.0-gpu-cuda11.8-cudnn8.9-trt8.6</span><br><span class=\"line\"></span><br><span class=\"line\"># 2.创建容器运行目录</span><br><span class=\"line\">mkdir puddlex</span><br><span class=\"line\">cd puddlex</span><br><span class=\"line\"></span><br><span class=\"line\"># 3.运行容器</span><br><span class=\"line\">docker run --gpus all --name paddle-hpi -v $PWD:/paddle --shm-size=16G --network=host -it ccr-2vdh3abv-pub.cnc.bj.baidubce.com/paddlex/paddlex:paddlex3.0.1-paddlepaddle3.0.0-gpu-cuda11.8-cudnn8.9-trt8.6 /bin/bash</span><br><span class=\"line\"></span><br><span class=\"line\"># 默认直接进入容器内部了，后续退出想再次进入使用</span><br><span class=\"line\">docker attach paddle-hpi</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>进入容器内部安装 <a href=\"http://www.paddleocr.ai/main/quick_start.html\">PaddleOCR</a></li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 1.安装PaddlePaddle</span><br><span class=\"line\">python -m pip install paddlepaddle-gpu==3.0.0 -i https://www.paddlepaddle.org.cn/packages/stable/cu118/</span><br><span class=\"line\"></span><br><span class=\"line\"># 2.安装paddleocr</span><br><span class=\"line\">pip install paddleocr</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>验证安装</li>\n</ol>\n<p>采用<a href=\"https://github.com/PaddlePaddle/PaddleOCR/blob/main/readme/README_cn.md\">github</a>上的命令，简单直接：</p>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 运行 PP-OCRv5 推理</span><br><span class=\"line\">paddleocr ocr -i https://paddle-model-ecology.bj.bcebos.com/paddlex/imgs/demo_image/general_ocr_002.png --use_doc_orientation_classify False --use_doc_unwarping False --use_textline_orientation False </span><br><span class=\"line\"></span><br><span class=\"line\"># 运行 PP-StructureV3 推理</span><br><span class=\"line\">paddleocr pp_structurev3 -i https://paddle-model-ecology.bj.bcebos.com/paddlex/imgs/demo_image/pp_structure_v3_demo.png --use_doc_orientation_classify False --use_doc_unwarping False</span><br><span class=\"line\"></span><br><span class=\"line\"># 运行 PP-ChatOCRv4 推理前，需要先获得千帆API Key</span><br><span class=\"line\">paddleocr pp_chatocrv4_doc -i https://paddle-model-ecology.bj.bcebos.com/paddlex/imgs/demo_image/vehicle_certificate-1.png -k 驾驶室准乘人数 --qianfan_api_key your_api_key --use_doc_orientation_classify False --use_doc_unwarping False </span><br><span class=\"line\"></span><br><span class=\"line\"># 查看 &quot;paddleocr ocr&quot; 详细参数</span><br><span class=\"line\">paddleocr ocr --help</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"3-开启服务\"><a href=\"#3-开启服务\" class=\"headerlink\" title=\"3 开启服务\"></a>3 开启服务</h2><h3 id=\"3-1-简单服务化部署\"><a href=\"#3-1-简单服务化部署\" class=\"headerlink\" title=\"3.1 简单服务化部署\"></a>3.1 简单服务化部署</h3><ol>\n<li>安装<a href=\"http://www.paddleocr.ai/main/version3.x/deployment/serving.html\">服务化部署插件</a></li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">paddlex --install serving</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>运行服务器</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># OCR产线</span><br><span class=\"line\">paddlex --serve --pipeline OCR --port 8080</span><br><span class=\"line\"></span><br><span class=\"line\"># PP-StructureV3</span><br><span class=\"line\">paddlex --serve --pipeline PP-StructureV3 --port 8080</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-2-启用高性能推理\"><a href=\"#3-2-启用高性能推理\" class=\"headerlink\" title=\"3.2 启用高性能推理\"></a>3.2 启用高性能推理</h3><ol>\n<li>安装<a href=\"https://paddlepaddle.github.io/PaddleX/latest/pipeline_deploy/high_performance_inference.html#11\">高性能推理插件</a></li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">paddlex --install hpi-gpu</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>运行服务器</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># OCR产线</span><br><span class=\"line\">paddlex --serve --pipeline OCR --port 8080 --hpi_config</span><br><span class=\"line\"></span><br><span class=\"line\"># PP-StructureV3</span><br><span class=\"line\">paddlex --serve --pipeline PP-StructureV3 --port 8080 --hpi_config</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-3-同时启动多个服务\"><a href=\"#3-3-同时启动多个服务\" class=\"headerlink\" title=\"3.3 同时启动多个服务\"></a>3.3 同时启动多个服务</h3><ol>\n<li>安装screen</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">apt-get update</span><br><span class=\"line\">apt-get install -y screen</span><br></pre></td></tr></table></figure>\n\n<ol start=\"2\">\n<li>通过screen会话运行服务器</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># OCR产线</span><br><span class=\"line\">screen -S ocr -d paddlex --serve --pipeline OCR --port 8080 --hpi_config</span><br><span class=\"line\"></span><br><span class=\"line\"># PP-StructureV3</span><br><span class=\"line\">screen -S structure -d paddlex --serve --pipeline PP-StructureV3 --port 8080 --hpi_config</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>管理screen会话</li>\n</ol>\n<figure class=\"highlight plaintext\"><figcaption><span>bash</span></figcaption><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># 查看正在运行的会话</span><br><span class=\"line\">screen -ls</span><br><span class=\"line\"></span><br><span class=\"line\"># 进入某个容器(使用Ctrl+D，然后按A退出)</span><br><span class=\"line\">screen -r ocr/structure</span><br></pre></td></tr></table></figure>\n\n<h2 id=\"4-API文档\"><a href=\"#4-API文档\" class=\"headerlink\" title=\"4 API文档\"></a>4 API文档</h2><p>详见对应文档 -&gt; 开发集成&#x2F;部署 -&gt; API参考</p>\n<ul>\n<li><a href=\"http://www.paddleocr.ai/main/version3.x/pipeline_usage/OCR.html#3\">ocr对应api</a> POST &#x2F;ocr</li>\n<li><a href=\"http://www.paddleocr.ai/main/version3.x/pipeline_usage/PP-StructureV3.html#3\">structure对应api</a> POST &#x2F;layout-parsing</li>\n</ul>\n<span class='p center h1 black'>欢迎评论！</span>","categories":[{"name":"模型部署","path":"api/categories/模型部署.json"}],"tags":[{"name":"教程","path":"api/tags/教程.json"}]}